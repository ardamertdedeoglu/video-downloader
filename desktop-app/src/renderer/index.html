<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' https: data:;">
    <title>Video Downloader</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-content">
            <div class="splash-icon">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <polygon points="10,8 16,12 10,16" fill="currentColor"/>
                </svg>
            </div>
            <h1 class="splash-title">Video Downloader</h1>
            <div class="splash-loader">
                <div class="splash-loader-bar"></div>
            </div>
            <p class="splash-text">YÃ¼kleniyor...</p>
        </div>
    </div>

    <div class="app-container">
        <!-- Titlebar for macOS -->
        <div class="titlebar" id="titlebar">
            <div class="titlebar-drag-region"></div>
            <span class="app-title">Video Downloader</span>
        </div>

        <!-- Binary Download Modal -->
        <div class="modal" id="binaryModal">
            <div class="modal-content">
                <div class="modal-icon">â¬‡ï¸</div>
                <h2>Ä°lk Kurulum</h2>
                <p id="binaryStatus">Gerekli bileÅŸenler indiriliyor...</p>
                <div class="progress-container">
                    <div class="progress-bar" id="binaryProgress"></div>
                </div>
                <p class="progress-text" id="binaryProgressText">HazÄ±rlanÄ±yor...</p>
            </div>
        </div>

        <!-- Update Available Banner -->
        <div class="update-banner" id="updateBanner" style="display: none;">
            <div class="update-info">
                <span class="update-text" id="updateText">ğŸ‰ Yeni sÃ¼rÃ¼m mevcut!</span>
                <div class="update-progress" id="updateProgress" style="display: none;">
                    <div class="update-progress-bar" id="updateProgressBar"></div>
                </div>
                <span class="update-percent" id="updatePercent" style="display: none;">%0</span>
            </div>
            <div class="update-actions">
                <button id="updateBtn" class="btn-small">GÃ¼ncelle</button>
                <button id="dismissUpdate" class="btn-small btn-ghost">Ã—</button>
            </div>
        </div>

        <!-- Navigation Sidebar -->
        <div class="nav-overlay" id="navOverlay"></div>
        <nav class="nav-sidebar" id="navSidebar">
            <div class="nav-header">
                <h3>MenÃ¼</h3>
                <button class="nav-close-btn" id="navCloseBtn">Ã—</button>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-mode="downloader">
                    <span class="nav-icon">ğŸ“¥</span>
                    <span class="nav-text">Video Ä°ndirici</span>
                </li>
                <li class="nav-item" data-mode="converter">
                    <span class="nav-icon">ğŸ”„</span>
                    <span class="nav-text">DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼</span>
                </li>
            </ul>
            <div class="nav-footer">
                <p>Video Downloader v1.0</p>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="hamburger-btn" id="hamburgerBtn" title="MenÃ¼">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                    <div class="logo">
                        <span class="logo-icon" id="logoIcon">ğŸ“¥</span>
                        <h1 id="pageTitle">Video Downloader</h1>
                    </div>
                </div>
                <button class="settings-btn" id="settingsBtn" title="Ayarlar">
                    âš™ï¸
                </button>
            </header>

            <!-- URL Input Section -->
            <section class="url-section">
                <div class="input-group">
                    <input 
                        type="text" 
                        id="urlInput" 
                        placeholder="YouTube, Twitter, Instagram veya diÄŸer video URL'sini yapÄ±ÅŸtÄ±rÄ±n"
                        autocomplete="off"
                    >
                    <button id="fetchBtn" class="btn-primary">
                        <span class="btn-text">Getir</span>
                        <span class="btn-loader" style="display: none;">â³</span>
                    </button>
                </div>
                <p class="supported-sites">
                    YouTube, Twitter/X, Instagram, TikTok, Facebook ve 1000+ site desteklenir
                </p>
            </section>

            <!-- Error Message -->
            <div class="error-message" id="errorMessage" style="display: none;">
                <span class="error-icon">âš ï¸</span>
                <span class="error-text"></span>
            </div>

            <!-- Video Info Section -->
            <section class="video-section" id="videoSection" style="display: none;">
                <div class="video-card">
                    <div class="video-thumbnail">
                        <img id="videoThumbnail" src="" alt="Video thumbnail">
                        <span class="video-duration" id="videoDuration"></span>
                    </div>
                    <div class="video-info">
                        <h2 id="videoTitle"></h2>
                        <p class="video-meta">
                            <span id="videoUploader"></span>
                            <span class="separator">â€¢</span>
                            <span id="videoViews"></span>
                        </p>
                    </div>
                </div>

                <!-- Format Selection -->
                <div class="format-section" id="formatSection">
                    <h3>Format SeÃ§in</h3>
                    
                    <div class="format-tabs">
                        <button class="format-tab active" data-tab="video">ğŸ¬ Video</button>
                        <button class="format-tab" data-tab="audio">ğŸµ Sadece Ses</button>
                    </div>

                    <div class="format-content" id="videoFormats">
                        <div class="format-list" id="videoFormatList"></div>
                    </div>

                    <div class="format-content" id="audioFormats" style="display: none;">
                        <div class="format-list" id="audioFormatList"></div>
                        <div class="audio-option">
                            <button id="downloadMp3Btn" class="btn-primary btn-full">
                                ğŸµ MP3 Olarak Ä°ndir (En Ä°yi Kalite)
                            </button>
                        </div>
                    </div>

                    <!-- Download Button -->
                    <div class="download-action" id="downloadAction" style="display: none;">
                        <div class="selected-format-info" id="selectedFormatInfo"></div>
                        <button id="startDownloadBtn" class="btn-primary btn-full btn-download">
                            â¬‡ï¸ Ä°ndir
                        </button>
                    </div>
                </div>

                <!-- Download Progress -->
                <div class="download-progress" id="downloadProgress" style="display: none;">
                    <div class="progress-header">
                        <span id="downloadStatus">Ä°ndiriliyor...</span>
                        <button id="cancelDownload" class="btn-ghost">Ä°ptal</button>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" id="downloadProgressBar"></div>
                    </div>
                    <p class="progress-percent" id="downloadPercent">0%</p>
                </div>

                <!-- Download Complete -->
                <div class="download-complete" id="downloadComplete" style="display: none;">
                    <span class="complete-icon">âœ…</span>
                    <span class="complete-text">Ä°ndirme tamamlandÄ±!</span>
                    <button id="openFolderBtn" class="btn-small">ğŸ“‚ KlasÃ¶rÃ¼ AÃ§</button>
                </div>
            </section>

            <!-- ========== CONVERTER SECTION ========== -->
            <section class="converter-section" id="converterSection" style="display: none;">
                <!-- Drop Zone -->
                <div class="drop-zone" id="dropZone">
                    <div class="drop-zone-content">
                        <span class="drop-zone-icon">ğŸ“</span>
                        <h3>DosyalarÄ± SÃ¼rÃ¼kleyip BÄ±rakÄ±n</h3>
                        <p>veya</p>
                        <button class="btn-primary" id="selectFilesBtn">
                            ğŸ“‚ Dosya SeÃ§
                        </button>
                        <p class="drop-zone-hint">Video: MP4, MKV, AVI, MOV, WebM â€¢ Ses: MP3, WAV, FLAC, AAC, OGG</p>
                    </div>
                </div>

                <!-- File Queue Warning (20+ files) -->
                <div class="queue-warning" id="queueWarning" style="display: none;">
                    <span class="warning-icon">âš ï¸</span>
                    <span class="warning-text" id="warningText">25 dosya seÃ§ildi. Bu iÅŸlem uzun sÃ¼rebilir.</span>
                </div>

                <!-- File Queue -->
                <div class="file-queue-section" id="fileQueueSection" style="display: none;">
                    <div class="queue-header">
                        <h3>ğŸ“‹ Dosya KuyruÄŸu (<span id="fileCount">0</span>)</h3>
                        <button class="btn-ghost btn-small" id="clearQueueBtn">ğŸ—‘ï¸ Temizle</button>
                    </div>
                    <div class="file-queue" id="fileQueue"></div>
                </div>

                <!-- Conversion Settings -->
                <div class="conversion-settings" id="conversionSettings" style="display: none;">
                    <h3>âš™ï¸ DÃ¶nÃ¼ÅŸtÃ¼rme AyarlarÄ±</h3>
                    
                    <!-- Output Format -->
                    <div class="setting-row">
                        <label>Ã‡Ä±ktÄ± FormatÄ±</label>
                        <div class="format-grid" id="outputFormatGrid">
                            <!-- Video Formats -->
                            <div class="format-group" id="videoFormatGroup">
                                <span class="format-group-label">Video:</span>
                                <div class="format-options">
                                    <button class="format-option selected" data-format="mp4">MP4</button>
                                    <button class="format-option" data-format="mkv">MKV</button>
                                    <button class="format-option" data-format="webm">WebM</button>
                                    <button class="format-option" data-format="avi">AVI</button>
                                    <button class="format-option" data-format="mov">MOV</button>
                                </div>
                            </div>
                            <!-- Audio Formats -->
                            <div class="format-group" id="audioFormatGroup" style="display: none;">
                                <span class="format-group-label">Ses:</span>
                                <div class="format-options">
                                    <button class="format-option selected" data-format="mp3">MP3</button>
                                    <button class="format-option" data-format="aac">AAC</button>
                                    <button class="format-option" data-format="wav">WAV</button>
                                    <button class="format-option" data-format="flac">FLAC</button>
                                    <button class="format-option" data-format="ogg">OGG</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quality Preset -->
                    <div class="setting-row">
                        <label>Kalite AyarÄ±</label>
                        <div class="preset-options">
                            <button class="preset-option" data-preset="fast">
                                <span class="preset-icon">âš¡</span>
                                <span class="preset-name">HÄ±zlÄ±</span>
                                <span class="preset-desc">DÃ¼ÅŸÃ¼k kalite, Ã§ok hÄ±zlÄ±</span>
                            </button>
                            <button class="preset-option selected" data-preset="balanced">
                                <span class="preset-icon">âš–ï¸</span>
                                <span class="preset-name">Dengeli</span>
                                <span class="preset-desc">Orta kalite, orta hÄ±z</span>
                            </button>
                            <button class="preset-option" data-preset="quality">
                                <span class="preset-icon">ğŸ’</span>
                                <span class="preset-name">YÃ¼ksek Kalite</span>
                                <span class="preset-desc">En iyi kalite, yavaÅŸ</span>
                            </button>
                        </div>
                    </div>

                    <!-- Start Conversion Button -->
                    <button class="btn-primary btn-full btn-convert" id="startConversionBtn">
                        ğŸ”„ DÃ¶nÃ¼ÅŸtÃ¼rmeyi BaÅŸlat
                    </button>
                </div>

                <!-- Conversion Progress -->
                <div class="conversion-progress-section" id="conversionProgressSection" style="display: none;">
                    <div class="progress-header">
                        <h3>ğŸ”„ DÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼yor...</h3>
                        <button class="btn-ghost" id="cancelConversionBtn">Ä°ptal</button>
                    </div>
                    
                    <!-- Overall Progress -->
                    <div class="overall-progress">
                        <div class="progress-info">
                            <span id="conversionStatus">Dosya 1/5 iÅŸleniyor...</span>
                            <span id="conversionPercent">0%</span>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar converter-progress" id="conversionProgressBar"></div>
                        </div>
                    </div>

                    <!-- Current File -->
                    <div class="current-file-progress">
                        <span class="current-file-name" id="currentFileName">video.mp4</span>
                        <div class="progress-container small">
                            <div class="progress-bar converter-progress" id="currentFileProgressBar"></div>
                        </div>
                    </div>
                </div>

                <!-- Conversion Complete -->
                <div class="conversion-complete" id="conversionComplete" style="display: none;">
                    <div class="complete-header">
                        <span class="complete-icon-large">âœ…</span>
                        <h3>DÃ¶nÃ¼ÅŸtÃ¼rme TamamlandÄ±</h3>
                    </div>
                    
                    <div class="complete-summary">
                        <div class="summary-item success">
                            <span class="summary-icon">âœ“</span>
                            <span class="summary-text">BaÅŸarÄ±lÄ±: <strong id="successCount">0</strong> dosya</span>
                        </div>
                        <div class="summary-item error" id="failedSummary" style="display: none;">
                            <span class="summary-icon">âœ—</span>
                            <span class="summary-text">BaÅŸarÄ±sÄ±z: <strong id="failedCount">0</strong> dosya</span>
                        </div>
                    </div>

                    <!-- Failed Files List -->
                    <div class="failed-files-list" id="failedFilesList" style="display: none;">
                        <h4>BaÅŸarÄ±sÄ±z Dosyalar:</h4>
                        <ul id="failedFilesUl"></ul>
                    </div>

                    <div class="complete-actions">
                        <button class="btn-primary" id="openConvertedFolderBtn">ğŸ“‚ KlasÃ¶rÃ¼ AÃ§</button>
                        <button class="btn-ghost" id="newConversionBtn">ğŸ”„ Yeni DÃ¶nÃ¼ÅŸÃ¼m</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Settings Overlay -->
        <div class="settings-overlay" id="settingsOverlay" style="display: none;"></div>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settingsPanel" style="display: none;">
            <div class="settings-header">
                <h2>âš™ï¸ Ayarlar</h2>
                <button id="closeSettings" class="btn-ghost">Ã—</button>
            </div>
            
            <div class="settings-content">
                <!-- Website Cookie Sync -->
                <div class="setting-group">
                    <label>ğŸª +18 Video DesteÄŸi</label>
                    <p class="setting-desc">YaÅŸ kÄ±sÄ±tlamalÄ± videolar iÃ§in YouTube hesabÄ±nÄ±za giriÅŸ yapÄ±n</p>
                    
                    <div class="cookie-sync-status" id="cookieSyncStatus">
                        <span class="cookie-icon">ğŸ”’</span>
                        <span id="cookieSyncText">GiriÅŸ yapÄ±lmadÄ±</span>
                    </div>
                    
                    <div class="cookie-sync-actions">
                        <button id="youtubeLoginBtn" class="btn-primary">ğŸ” YouTube'a GiriÅŸ Yap</button>
                        <button id="refreshCookiesBtn" class="btn-small" style="display: none;">ğŸ”„ Ã‡erezleri Yenile</button>
                        <button id="importCookieBtn" class="btn-small btn-ghost">ğŸ“ Dosyadan YÃ¼kle</button>
                        <button id="deleteCookieBtn" class="btn-small btn-ghost" style="display: none;">ğŸ—‘ï¸ Ã‡Ä±kÄ±ÅŸ Yap</button>
                    </div>
                    
                    <p class="setting-hint" style="margin-top: 8px;">
                        ğŸ’¡ GiriÅŸ yaptÄ±ktan sonra +18 videolar otomatik olarak indirilebilir
                    </p>
                </div>

                <!-- Download Path -->
                <div class="setting-group">
                    <label>Ä°ndirme KlasÃ¶rÃ¼</label>
                    <div class="path-selector">
                        <input type="text" id="downloadPath" readonly>
                        <button id="selectPathBtn" class="btn-small">DeÄŸiÅŸtir</button>
                    </div>
                </div>

                <!-- Binary Status -->
                <div class="setting-group">
                    <label>BileÅŸen Durumu</label>
                    <div class="binary-status" id="binaryStatusList"></div>
                    <div class="binary-actions" style="margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap;">
                        <button id="updateYtdlpBtn" class="btn-small btn-primary" style="display: none;">
                            â¬†ï¸ yt-dlp GÃ¼ncelle
                        </button>
                        <button id="updateBinariesBtn" class="btn-small">
                            ğŸ”„ TÃ¼mÃ¼nÃ¼ Yeniden Ä°ndir
                        </button>
                    </div>
                    <p class="ytdlp-update-info" id="ytdlpUpdateInfo" style="display: none; margin-top: 8px; font-size: 12px; color: #ffa500;"></p>
                </div>

                <!-- App Info -->
                <div class="setting-group">
                    <label>Uygulama Bilgisi</label>
                    <p class="app-version" id="appVersion">SÃ¼rÃ¼m: ...</p>
                    <p class="app-author">YapÄ±mcÄ±: Arda Mert Dedeoglu</p>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
